x-legacy-components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          nullable: true
    MedicalRecord:
      type: object
      properties:
        id: { type: integer }
        teacher_id: { type: integer }
        ailment_name: { type: string }
        severity:
          type: string
          enum: [Mild, Moderate, Severe, Critical]
        remarks: { type: string, nullable: true }
        documents: { type: string, nullable: true, description: "Absolute or relative URL to uploaded file" }
        entered_by_id: { type: integer }
        created_at: { type: string, format: date-time }
        updated_at: { type: string, format: date-time, nullable: true }
        deleted_at: { type: string, format: date-time, nullable: true }
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ApiResponse:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        data:
          nullable: true
    MedicalRecord:
      type: object
      properties:
        id: { type: integer }
        teacher_id: { type: integer }
        ailment_name: { type: string }
        severity:
          type: string
          enum: [Mild, Moderate, Severe, Critical]
        remarks: { type: string, nullable: true }
        documents: { type: string, nullable: true, description: "Absolute or relative URL to uploaded file" }
        entered_by_id: { type: integer }
        created_at: { type: string, format: date-time }
        updated_at: { type: string, format: date-time, nullable: true }
        deleted_at: { type: string, format: date-time, nullable: true }
    ApiSuccess:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: OK
    ApiError:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: Error message

    User:
      type: object
      properties:
        id: { type: integer, example: 1 }
        username: { type: string, example: admin }
        email: { type: string, example: admin@tms.com }
        role: { type: string, example: admin }
        is_active: { type: boolean, example: true }
        created_at: { type: string, format: date-time }

    LoginRequest:
      type: object
      required: [username, password]
      properties:
        username: { type: string, example: admin }
        password: { type: string, example: admin123 }

    LoginResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: object
              properties:
                user:
                  $ref: '#/components/schemas/User'
                token:
                  type: string
                csrf:
                  type: string

    RefreshResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: object
              properties:
                token: { type: string }
                csrf: { type: string }

    PasswordResetRequest:
      type: object
      required: [email]
      properties:
        email: { type: string, example: user@example.com }

    PasswordReset:
      type: object
      required: [token, password]
      properties:
        token: { type: string }
        password: { type: string, example: NewPassword123 }

    School:
      type: object
      properties:
        id: { type: integer, example: 10 }
        school_id: { type: string, example: '10001' }
        school_name: { type: string, example: 'Central Primary School' }
        school_type: { type: string, example: 'Co-educational' }
        school_level: { type: string, example: 'Class 1, Class 2' }
        management: { type: string, example: 'Government' }
        medium: { type: string, example: 'English' }
        district: { type: string, example: 'Aizawl' }
        rd_block: { type: string, example: 'SDEO Aizawl East' }
        habitation: { type: string, nullable: true }
        pincode: { type: string, nullable: true }
        block_office: { type: string, example: 'DEO Aizawl' }
        created_at: { type: string, format: date-time }

    Teacher:
      type: object
      properties:
        id: { type: integer, example: 5 }
        teacher_name: { type: string, example: 'John Doe' }
        date_of_birth: { type: string, format: date }
        joining_date: { type: string, format: date }
        phone_number: { type: string, example: '9876543210' }
        email: { type: string, example: 'john@example.com' }
        social_group: { type: string, example: 'General' }
        religion: { type: string, example: 'Christian' }
        gender: { type: string, example: 'Male' }
        school_id: { type: string, example: '10001' }
        current_school_name: { type: string, example: 'Central Primary School' }
        management: { type: string, example: 'Government' }
        medium: { type: string, example: 'English' }
        district: { type: string, example: 'Aizawl' }
        rd_block: { type: string, example: 'SDEO Aizawl East' }
        created_at: { type: string, format: date-time }

    District:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Aizawl' }
        is_active: { type: boolean, example: true }

    Medium:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'English' }
        is_active: { type: boolean, example: true }

    ManagementType:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Government' }
        is_active: { type: boolean, example: true }

    BlockOffice:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'DEO Aizawl' }
        is_active: { type: boolean, example: true }

    Pagination:
      type: object
      properties:
        page: { type: integer, example: 1 }
        limit: { type: integer, example: 10 }
        total: { type: integer, example: 100 }
        totalPages: { type: integer, example: 10 }

    Subject:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Mathematics' }
        code: { type: string, example: 'MATH' }
        classes: { type: string, example: 'Class 1, Class 2' }

    Religion:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Christian' }
        is_active: { type: boolean, example: true }

    SchoolType:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Co-educational' }
        is_active: { type: boolean, example: true }

    ServiceCategory:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Gazetted Group A' }
        is_active: { type: boolean, example: true }

    SchoolResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/School'

    SchoolsListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/School'
            pagination:
              $ref: '#/components/schemas/Pagination'

    TeacherResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Teacher'

    TeachersListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Teacher'
            pagination:
              $ref: '#/components/schemas/Pagination'

    DistrictsListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/District'

    DistrictResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/District'

    MediumsListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Medium'

    MediumResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Medium'

    ManagementTypesListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/ManagementType'

    ManagementTypeResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ManagementType'

    BlockOfficesListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/BlockOffice'

    BlockOfficeResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/BlockOffice'

    SubjectsListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Subject'

    SubjectResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Subject'

    ReligionsListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Religion'

    ReligionResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Religion'

    SchoolTypesListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/SchoolType'

    SchoolTypeResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/SchoolType'

    ServiceCategoriesListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/ServiceCategory'

    ServiceCategoryResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/ServiceCategory'


    RdBlock:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'SDEO Aizawl East' }
        district_id: { type: integer, example: 1 }
        is_active: { type: boolean, example: true }
        district_name: { type: string, example: 'Aizawl' }

    Village:
      type: object
      properties:
        id: { type: integer, example: 1 }
        name: { type: string, example: 'Chanmari' }
        rd_block_id: { type: integer, example: 1 }
        is_active: { type: boolean, example: true }
        rd_block_name: { type: string, example: 'SDEO Aizawl East' }
        district_name: { type: string, example: 'Aizawl' }

    RdBlocksListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/RdBlock'

    RdBlockResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/RdBlock'

    VillagesListResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/Village'

    VillageResponse:
      allOf:
        - $ref: '#/components/schemas/ApiSuccess'
        - type: object
          properties:
            data:
              $ref: '#/components/schemas/Village'


